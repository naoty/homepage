---
title: PC二台でKVMをどう共有するか問題
time: 2023-12-09 19:14
tags: ['diary']
---

プライベートのPCと仕事用のPCでディスプレイ、キーボード、マウス（以下、KVM）などを共有していると、ケーブルをつなぎ直すのが面倒だ。毎日のことだから、そこそこのストレスになってくる。

# USBスイッチ
だから、数年前にUSBスイッチを買ってきてPC間のつなぎ直しをスイッチひとつでできるようにした。様子見のためKVMスイッチを買わずに安いUSBスイッチにしたから、ディスプレイはディスプレイのボタンからHDMIの接続を切り替えないといけない。

こんなイメージ。USBスイッチのスイッチを押すと、USB機器の接続先が切り替わる。

![](/posts/531/usb-switch.png)

ただ、このUSBスイッチのせいで、デスクの上がケーブルだらけになってしまうのが気に入らなかった。あと、映像出力もスイッチひとつで切り替えたくなってきた。

# KVMスイッチを探す旅
というわけで、KVMスイッチを探すことにした。KVMスイッチの中にはスイッチ部分が本体からケーブルでつながれた別のパーツになっているものがあり、それならKVMスイッチを天板裏に隠したとしてもスイッチが押しにくくならずに済みそうだった。

Amazonで物色しているうちに、あることに気がついた。

ひとつは、KVMスイッチ製品の変数が多すぎる。

- 何台のPCに接続できて、映像出力はHDMIなのか、Display Portなのか。
- 何台のUSB機器に接続できて、USB端子の規格はUSB-Aなのか、USB-Cなのか。そして、USBの規格は2.0なのか、3.0なのか、3.1なのか、PDに対応しているのか。
- スイッチは本体のみか、別パーツに分かれているのか、キーボードからホットキーで切り替えられるのか。
- バスパワーなのか、セルフパワーにも対応しているのか。バスパワーだと接続台数によっては安定しないので、セルフパワーでも動いてほしい。

もうひとつは、自分が使っている機器との相性は使ってみないと分からないということ。ものによっては、2, 3万円くらいするものもあって、買ってみたはいいけど相性がよくないのか動かなかったみたいなことが許されないので、レビューまで確認しておきたい。

というわけで、KVMスイッチを購入するのは非常に難しいということが分かってきた。プライベートのPCと仕事用のPCの二台持ちなんて、今の世の中では普通だと思うのだけど、みんなどうしてるんだろう。

# ディスプレイのKVMスイッチ機能
いったんKVMスイッチを探す旅をやめて巷ではどのようにこの課題を克服しているのか調べてみることにした。調べていくうちに、ディスプレイ自体にKVMスイッチ機能があることに気がついた。

ディスプレイにはいくつかUSBポートがついているが、それらはアップストリームというポートとダウンストリームというポートに分かれる。アップストリームはPC側に接続するポートで、ダウンストリームはキーボードなどのUSB機器に接続するポートだ。

自分のディスプレイにはアップストリームのポートが2つあることに気がついた。ということは、2台のPCをアップストリームに接続して、ダウンストリームに接続したUSB機器を共有できるということなので、これはまさにKVMスイッチということになる。

![](/posts/531/kvm-switch-with-display.png)

ディスプレイのユーザーマニュアルを読んでみると、映像出力とアップストリームポートをマッピングする機能があった。HDMI 1が有効なときは1つ目のアップストリームポートを有効にし、HDMI 2が有効なときは2つ目のアップストリームポートを有効にする、といった設定ができるようだ（USB-Cであれば映像出力とUSB機器との接続をケーブル1本でできるのだけど、なぜか動かなかったため、HDMIとアップストリームポートで2台接続している）。

# まとめ
USBスイッチへの不満からKVMスイッチを探す旅に出た結果、目の前のディスプレイにKVMスイッチ機能があることを知り安住の地にたどり着いた、という話でした。ディスプレイのマニュアルはよく読んだ方がよいです。

最後に読者の参考のために自分の環境を書いておきます。

- PC 1: Windowsの自作PC（マザーボードはASUS製）
- PC 2: Macbook Pro（M2）
- ディスプレイ: Dell U3914W
